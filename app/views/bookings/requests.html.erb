<h1> My Requests </h1>

<% if @requests.any? %>
	<% @requests.each do |request| %>
		<% case request.status %>
		<% when 'pending', 'confirmed' %>
			<ul>
				<li><%= request.user.first_name %></li>
				<li><%= request.status %></li>
				<li><%= request.start_date %> - <%= request.end_date %></li>
				<li><%= request.number_travellers %></li>
				<li><%= link_to 'See Details', request_booking_path(request) %></li>
			</ul>
		<% when 'cancelled' %>
			<ul>
				<li><%= request.user.first_name %></li>
				<li><%= request.status %></li>
				<li>This request has been cancelled on <%= request.cancellation_date %>.</li>
				<li><%= request.start_date %> - <%= request.end_date %></li>
				<li><%= request.number_travellers %></li>
				<li><%= link_to 'Browse other couches' %>
			</ul>
		<% when 'completed' %>
			<ul>
				<li><%= request.user.first_name %></li>
				<li><%= request.status %></li>
				<li>You hosted <%= request.couch.user.first_name %>.</li>
				<li><%= request.start_date %> - <%= request.end_date %></li>
				<li><%= request.number_travellers %></li>
				<% if request.review.nil? %>
					<li><%= link_to "Leave #{request.user.first_name} a review", new_couch_booking_review_path(request.user.couch, request) %>
				<% end %>
			</ul>
		<% end %>
	<% end %>
<% else %>
	<p>No one has requested to stay on your couch yet. Enjoy the silence!</p>
<% end %>