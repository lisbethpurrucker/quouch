<div class="booking-form__wrap">
	<section>
		<div class="host">
			<% if @host.photo.key %>
				<%= cl_image_tag @host.photo.key, class: 'host__gallery' %>
			<% else %>
				<%= image_tag('https://res.cloudinary.com/dtkxl0tbk/image/upload/v1679925300/profile.jpg', class: 'host__gallery') %>
			<% end %>
			<div class="host__content">
				<ul class="host__info">
					<li class="host__name"><%= @host.first_name %></li>
					<div class="host__characteristics">
						<li><%= @host.pronouns %></li>
						<li><%= @host.calculated_age %></li>
					</div>
				</ul>
				<ul class="host__offers offers">
					<% if @host.offers_couch %>
						<li class="offers-item">
							<%= image_tag('https://res.cloudinary.com/dtkxl0tbk/image/upload/v1680005867/sleep.svg') %>
							<p>couch</p>
						</li>
					<% end %>
					<% if @host.offers_hang_out %>
						<li class="offers-item">
							<%= image_tag('https://res.cloudinary.com/dtkxl0tbk/image/upload/v1680005862/hangout.svg') %>
							<p>hangout</p>
						</li>
					<% end %>
					<% if @host.offers_co_work %>
						<li class="offers-item">
							<%= image_tag('https://res.cloudinary.com/dtkxl0tbk/image/upload/v1680005869/work.svg') %>
							<p>co-work</p>
						</li>
					<% end %>
				</ul>
				<ul class="host__features features">
					<% @host.characteristics.each  do |characteristic| %>
						<li><%= characteristic.name %></li>
					<% end %>
				</ul>
				
				<div class="host__intro">
					<h2 class="host__intro-title">Introduction</h2>
					<p><%= @host.summary %></p>
				</div>

				<div class="host__accomodation">
					<h2 class="host__accomodation-title">Accomodation</h2>
					<ul class="host__accomodation-list">
						<% @host.couch.facilities.each do |facility| %>
							<li>
								<%= image_tag(facility.image) %>
								<%= facility.name %>
							</li>
						<% end %>
					</ul>
				</div>
			</div>
		</div>
	</section>

	<section class="booking-form">
		<%= simple_form_for [@couch, @booking],
				data: { controller: 'flatpickr' }, 
				defaults: { required: false } do |f| %>
			<% if @booking.errors.any? %>
				<h2>Error:</h2>
					<ul>
						<% @booking.errors.full_messages.each do |error| %>
							<li><%= error %></li>
						<% end %>
					</ul>
			<% end %>
			<div class="booking-form__type">
				<label>Pick one</label>
				<%= f.input :request,
										collection: @offers.keys,
										as: :radio_buttons,
										label: false %>
			</div>
			<span class="booking-form__details__header">Dates & Travellers</span>
			<div class="booking-form__details__wrap">
				<div class="booking-form__dates date">
					<div class="date-input">
						<%= image_tag('https://res.cloudinary.com/dtkxl0tbk/image/upload/v1680005859/calendar.svg') %>
						<%= f.input :start_date,
												as: :string,
												placeholder: 'from',
												input_html: { data: { flatpickr_target: 'startTime' } },
												label: false %>
					</div>
					<div class="date-input">
						<%= f.input :end_date,
												as: :string,
												placeholder: 'to',
												input_html: { data: { flatpickr_target: 'endTime' } },
												label: false %>
					</div>
				</div>
				<div class="booking-form__travellers">
					<%= image_tag('https://res.cloudinary.com/dtkxl0tbk/image/upload/v1680005865/people.svg') %>
					<%= f.input :number_travellers, 
											label: false,
											input_html: { value: 1 } %>
				</div>
			</div>
			<%= f.input :message, 
									label: :Message,
									input_html: { rows: 4 } %>
			<div class="booking-form__action">
				<%= f.submit 'Send Request', class: 'booking-form__button' %>
			</div>
		<% end %>
	</section>
</div>
